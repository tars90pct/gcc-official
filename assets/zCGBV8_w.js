import N from"./BYNtFHWZ.js";import{_ as $,r as w,j as I,o as j,e as G,N as A,v as r,A as x,T as k,x as s,P as g,z as f,t as p,H as h,y as b,d as z,Q as B,n as C}from"./BdtQ-Bfv.js";import{b as L}from"./DR47mUyJ.js";import{N as T,u as E}from"./D--4_TFs.js";const M={class:"relative max-w-full max-h-full w-full h-full flex items-center justify-center p-4 md:p-8"},S=["src"],H={key:0,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white text-sm md:text-base z-10"},V={__name:"SpinCardGallery",props:{images:{type:Array,default:()=>[],required:!0},initialIndex:{type:Number,default:0}},emits:["close"],setup(e,{expose:l,emit:c}){const m=c,t=e,n=w(t.initialIndex),u=I(()=>{if(t.images&&t.images.length>0){const i=t.images[n.value];return typeof i=="string"?i:i==null?void 0:i.url}return null});function d(i=t.initialIndex){t.images.length!==0&&(n.value=i,document.body.style.overflow="hidden")}function a(){m("close"),document.body.style.overflow=""}function o(){t.images.length<=1||(n.value=(n.value+1)%t.images.length)}function y(){t.images.length<=1||(n.value=(n.value-1+t.images.length)%t.images.length)}function _(i){switch(i.key){case"ArrowRight":o();break;case"ArrowLeft":y();break;case"Escape":a();break}}return j(()=>{window.addEventListener("keydown",_)}),G(()=>{window.removeEventListener("keydown",_),document.body.style.overflow=""}),l({open:d,close:a,nextImage:o,prevImage:y}),(i,ee)=>{const v=N;return r(),A(k,{name:"fade"},{default:x(()=>[s("div",{class:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[9999]",onClick:g(a,["self"])},[s("div",M,[f(k,{name:"spin-image",mode:"out-in"},{default:x(()=>[u.value?(r(),p("img",{key:n.value,src:u.value,class:"block max-w-full max-h-full object-contain transition duration-500 ease-in-out"},null,8,S)):h("",!0)]),_:1}),s("button",{onClick:g(y,["stop"]),class:"h-8 w-8 flex flex-row items-center justify-center absolute left-2 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-20 hover:bg-opacity-40 text-white p-2 rounded-full focus:outline-none focus:ring-2 focus:ring-white z-10 transition","aria-label":"Previous image"},[f(v,{name:"heroicons:chevron-left",class:"h-6 w-6"})]),s("button",{onClick:g(o,["stop"]),class:"h-8 w-8 flex flex-row items-center justify-center absolute right-2 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-20 hover:bg-opacity-40 text-white p-2 rounded-full focus:outline-none focus:ring-2 focus:ring-white z-10 transition","aria-label":"Next image"},[f(v,{name:"heroicons:chevron-right",class:"h-6 w-6"})]),s("button",{onClick:g(a,["stop"]),class:"h-8 w-8 flex flex-row items-center justify-center absolute top-4 right-4 bg-white bg-opacity-20 hover:bg-opacity-40 text-white rounded-full focus:outline-none focus:ring-2 focus:ring-white z-10 transition"},[f(v,{name:"heroicons:x-mark",class:"h-5 w-5"})]),e.images.length>1?(r(),p("div",H,b(n.value+1)+" / "+b(e.images.length),1)):h("",!0)])])]),_:1})}}},D=$(V,[["__scopeId","data-v-a5e98c30"]]),P=z({components:{},props:{error:{type:Object,default:()=>({statusCode:404})}},setup(e){const l=B(),c=w(!0),m=Number.parseInt(l.params.id);Number.isNaN(m)&&C("/");const t=E(),n=w(T.of({})),u=w(!1),d=I(()=>n.value.description.split(/\n+/).map(o=>o.startsWith("# ")?`<h2 class="text-2xl font-bold my-4">${o.substring(2)}</h2>`:o.startsWith("## ")?`<h3 class="text-xl font-bold my-3">${o.substring(3)}</h3>`:`<p class="mb-4">${o}</p>`).join(""));return j(()=>{c.value=!0,t.getNews(m).then(a=>{n.value=a.data}).catch(()=>{C("/")}).finally(()=>{c.value=!1})}),L({data:{},methods:{},stores:{}},{loading:c,news:n,formattedArticle:d,openCardGallery:u})}}),R={id:"events",class:"pt-14 pb-12 md:pt-24 md:pb-20 px-4 bg-primary"},U={class:"container mx-auto px-4 py-8 max-w-5xl"},W={class:"mb-6"},q={class:"text-sm"},F={class:"text-3xl font-bold mb-2"},K={class:"absolute inset-0 hover:bg-black hover:opacity-20"},O={class:"flex items-start justify-end w-full h-full p-4"},Q=["alt","src"],J={class:"mb-8 bg-white rounded-lg shadow-md p-6 article-container"},X={class:"prose prose-lg max-w-none"},Y=["innerHTML"];function Z(e,l,c,m,t,n){var a;const u=N,d=D;return r(),p("section",R,[s("div",U,[s("div",W,[s("p",q,"更新時間: "+b(e.news.updatedAt),1),s("h1",F,b(e.news.title),1)]),e.news.images.length>0?(r(),p("div",{key:0,class:"relative mb-8 mx-auto cursor-pointer group",onClick:l[1]||(l[1]=o=>e.openCardGallery=!0)},[s("div",K,[s("div",O,[f(u,{name:"heroicons:magnifying-glass",class:"h-8 w-8 text-white"})])]),(a=e.news.images)!=null&&a[0]?(r(),p("img",{key:0,alt:e.news.title?`Image for ${e.news.title}`:"News image",accessibility:"",class:"block max-w-full h-auto mx-auto mb-8 rounded-lg shadow-md",styling:"",src:e.news.images[0]},null,8,Q)):h("",!0),e.news.images.length>0&&e.openCardGallery?(r(),A(d,{key:1,images:e.news.images,onClose:l[0]||(l[0]=o=>e.openCardGallery=!1)},null,8,["images"])):h("",!0)])):h("",!0),s("div",J,[s("div",X,[s("div",{innerHTML:e.formattedArticle},null,8,Y)])])])])}const ae=$(P,[["render",Z]]);export{ae as default};
