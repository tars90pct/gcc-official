import $ from"./BEM3SsA9.js";import{_ as N,r as y,j as I,o as j,e as G,N as A,v as c,A as _,T as k,x as s,P as b,z as p,t as g,H as h,y as v,d as z,Q as B,n as C}from"./BA4Uaoxo.js";import{b as L}from"./DR47mUyJ.js";import{N as T,u as E}from"./D--4_TFs.js";const M={class:"relative max-w-full max-h-full w-full h-full flex items-center justify-center p-4 md:p-8"},S=["src"],H={key:0,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white text-sm md:text-base z-10"},R={__name:"SpinCardGallery",props:{images:{type:Array,default:()=>[],required:!0},initialIndex:{type:Number,default:0}},emits:["close"],setup(e,{expose:l,emit:u}){const m=u,t=e,n=y(t.initialIndex),d=I(()=>{if(t.images&&t.images.length>0){const o=t.images[n.value];return typeof o=="string"?o:o==null?void 0:o.url}return null});function f(o=t.initialIndex){t.images.length!==0&&(n.value=o,document.body.style.overflow="hidden")}function a(){m("close"),document.body.style.overflow=""}function r(){t.images.length<=1||(n.value=(n.value+1)%t.images.length)}function w(){t.images.length<=1||(n.value=(n.value-1+t.images.length)%t.images.length)}function i(o){switch(o.key){case"ArrowRight":r();break;case"ArrowLeft":w();break;case"Escape":a();break}}return j(()=>{window.addEventListener("keydown",i)}),G(()=>{window.removeEventListener("keydown",i),document.body.style.overflow=""}),l({open:f,close:a,nextImage:r,prevImage:w}),(o,ee)=>{const x=$;return c(),A(k,{name:"fade"},{default:_(()=>[s("div",{class:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[9999]",onClick:b(a,["self"])},[s("div",M,[p(k,{name:"spin-image",mode:"out-in"},{default:_(()=>[d.value?(c(),g("img",{key:n.value,src:d.value,class:"block max-w-full max-h-full object-contain transition duration-500 ease-in-out"},null,8,S)):h("",!0)]),_:1}),s("button",{onClick:b(w,["stop"]),class:"h-8 w-8 flex flex-row items-center justify-center absolute left-2 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-20 hover:bg-opacity-40 text-white p-2 rounded-full focus:outline-none focus:ring-2 focus:ring-white z-10 transition","aria-label":"Previous image"},[p(x,{name:"heroicons:chevron-left",class:"h-6 w-6"})]),s("button",{onClick:b(r,["stop"]),class:"h-8 w-8 flex flex-row items-center justify-center absolute right-2 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-20 hover:bg-opacity-40 text-white p-2 rounded-full focus:outline-none focus:ring-2 focus:ring-white z-10 transition","aria-label":"Next image"},[p(x,{name:"heroicons:chevron-right",class:"h-6 w-6"})]),s("button",{onClick:b(a,["stop"]),class:"h-8 w-8 flex flex-row items-center justify-center absolute top-4 right-4 bg-white bg-opacity-20 hover:bg-opacity-40 text-white rounded-full focus:outline-none focus:ring-2 focus:ring-white z-10 transition"},[p(x,{name:"heroicons:x-mark",class:"h-5 w-5"})]),e.images.length>1?(c(),g("div",H,v(n.value+1)+" / "+v(e.images.length),1)):h("",!0)])])]),_:1})}}},V=N(R,[["__scopeId","data-v-a5e98c30"]]),D=z({components:{},props:{error:{type:Object,default:()=>({statusCode:404})}},setup(e){const l=B(),u=y(!0),m=Number.parseInt(l.params.id);Number.isNaN(m)&&C("/");const t=E(),n=y(T.of({})),d=y(!1);let f=/\$A\{([^}]+)\}/g;const a=I(()=>n.value.description.replace(f,(i,o)=>`<a class="font-semibold text-blue-500" href="${o}">${o}</a>`).split(/\n+/).map(i=>i.startsWith("# ")?`<h2 class="text-2xl font-bold my-4">${i.substring(2)}</h2>`:i.startsWith("## ")?`<h3 class="text-xl font-bold my-3">${i.substring(3)}</h3>`:`<p class="mb-4">${i}</p>`).join(""));return j(()=>{u.value=!0,t.getNews(m).then(r=>{n.value=r.data}).catch(()=>{C("/")}).finally(()=>{u.value=!1})}),L({data:{},methods:{},stores:{}},{loading:u,news:n,formattedArticle:a,openCardGallery:d})}}),P={id:"events",class:"pt-14 pb-12 md:pt-24 md:pb-20 px-4 bg-primary"},U={class:"container mx-auto px-4 py-8 max-w-5xl"},W={class:"mb-6"},q={class:"text-sm"},F={class:"text-3xl font-bold mb-2"},K={class:"absolute inset-0 hover:bg-black hover:opacity-20"},O={class:"flex items-start justify-end w-full h-full p-4"},Q=["alt","src"],J={class:"mb-8 bg-white rounded-lg shadow-md p-6 article-container"},X={class:"prose prose-lg max-w-none"},Y=["innerHTML"];function Z(e,l,u,m,t,n){var a;const d=$,f=V;return c(),g("section",P,[s("div",U,[s("div",W,[s("p",q,"更新時間: "+v(e.news.updatedAt),1),s("h1",F,v(e.news.title),1)]),e.news.images.length>0?(c(),g("div",{key:0,class:"relative mb-8 mx-auto cursor-pointer group",onClick:l[1]||(l[1]=r=>e.openCardGallery=!0)},[s("div",K,[s("div",O,[p(d,{name:"heroicons:magnifying-glass",class:"h-8 w-8 text-white"})])]),(a=e.news.images)!=null&&a[0]?(c(),g("img",{key:0,alt:e.news.title?`Image for ${e.news.title}`:"News image",accessibility:"",class:"block max-w-full h-auto mx-auto mb-8 rounded-lg shadow-md",styling:"",src:e.news.images[0]},null,8,Q)):h("",!0),e.news.images.length>0&&e.openCardGallery?(c(),A(f,{key:1,images:e.news.images,onClose:l[0]||(l[0]=r=>e.openCardGallery=!1)},null,8,["images"])):h("",!0)])):h("",!0),s("div",J,[s("div",X,[s("div",{innerHTML:e.formattedArticle},null,8,Y)])])])])}const ae=N(D,[["render",Z]]);export{ae as default};
